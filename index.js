//Dicionario de Cartas

const Cartas = {
  0: {
    Nome: 'Padrão',
    Ataque: 0,
    Vida: 0,
    Locomocao: 0,
    Perfuracao: false,
    Magia: false,
    img: 'https://raw.githubusercontent.com/felipe-cesar-dev/imagens/refs/heads/main/estados/acre.png'
  },
  1: {
    Nome: 'Berserker#1',
    Ataque: 40,
    Vida: 50,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iBerserker.jpg?raw=true'
  },
  1: {
    Nome: 'Berserker#1',
    Ataque: 40,
    Vida: 50,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iBerserker.jpg?raw=true'
  },
  2: {
    Nome: 'Berserker#2',
    Ataque: 40,
    Vida: 50,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iBerserker.jpg?raw=true'
  },
  3: {
    Nome: 'Berserker#3',
    Ataque: 40,
    Vida: 50,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iBerserker.jpg?raw=true'
  },
  4: {
    Nome: 'Berserker#4',
    Ataque: 40,
    Vida: 50,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iBerserker.jpg?raw=true'
  },
  5: {
    Nome: 'Guerreiro#1',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  6: {
    Nome: 'Guerreiro#2',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  7: {
    Nome: 'Guerreiro#3',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  8: {
    Nome: 'Guerreiro#4',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  9: {
    Nome: 'Guerreiro#5',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  10: {
    Nome: 'Guerreiro#6',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  11: {
    Nome: 'Guerreiro#7',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  12: {
    Nome: 'Guerreiro#8',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  13: {
    Nome: 'Guerreiro#9',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  14: {
    Nome: 'Guerreiro#10',
    Ataque: 30,
    Vida: 60,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iGuerreiro.jpg?raw=true'
  },
  15: {
      Nome: 'Leonidas',
      Ataque: 50,
      Vida: 80,
      Locomocao: 2,
      Perfuracao: true,
      Magia: false,
      img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iLeonidas.jpg?raw=true'
  },
  16: {
      Nome: 'Ninja',
      Ataque: 40,
      Vida: 30,
      Locomocao: 3,
      Perfuracao: true,
      Magia: false,
      img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iNinja.jpg?raw=true'
  },
  17: {
      Nome: 'Samurai',
      Ataque: 35,
      Vida: 55,
      Locomocao: 2,
      Perfuracao: false,
      Magia: false,
      img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iSamurai.jpg?raw=true'
  },
  18: {
    Nome: 'Berserker#5',
    Ataque: 40,
    Vida: 50,
    Locomocao: 2,
    Perfuracao: false,
    Magia: false,
    img: 'https://github.com/felipe-cesar-dev/imagens/blob/main/iBerserker.jpg?raw=true'
  },
};


///Arrastar elementos

/*const objeto = document.getElementById('objeto');
const bloco = document.querySelectorAll('.bloco');
const porta = document.querySelectorAll('.porta');
const combate = document.querySelectorAll('.blocoDeCombate');
const nado = document.querySelectorAll('.areaDeNado');

objeto.addEventListener('dragstart', (event) => {
  event.dataTransfer.setData('text', objeto.id);
});

bloco.forEach((div) => {
  div.addEventListener('dragover', (event) => {
    event.preventDefault();
  });

  div.addEventListener('drop', (event) => {
    event.preventDefault();
    const objetoId = event.dataTransfer.getData('text');
    const objeto = document.getElementById(objetoId);
    div.appendChild(objeto);
  });
});

objeto.addEventListener('dragstart', (event) => {
  event.dataTransfer.setData('text', objeto.id);
});

porta.forEach((div) => {
  div.addEventListener('dragover', (event) => {
    event.preventDefault();
  });

  div.addEventListener('drop', (event) => {
    event.preventDefault();
    const objetoId = event.dataTransfer.getData('text');
    const objeto = document.getElementById(objetoId);
    div.appendChild(objeto);
  });
});


objeto.addEventListener('dragstart', (event) => {
  event.dataTransfer.setData('text', objeto.id);
});

combate.forEach((div) => {
  div.addEventListener('dragover', (event) => {
    event.preventDefault();
  });

  div.addEventListener('drop', (event) => {
    event.preventDefault();
    const objetoId = event.dataTransfer.getData('text');
    const objeto = document.getElementById(objetoId);
    div.appendChild(objeto);
  });
});

nado.forEach((div) => {
  div.addEventListener('dragover', (event) => {
    event.preventDefault();
  });

  div.addEventListener('drop', (event) => {
    event.preventDefault();
    const objetoId = event.dataTransfer.getData('text');
    const objeto = document.getElementById(objetoId);
    div.appendChild(objeto);
  });
});
 

/// Arrastar navegação

function dragStart(event) {
  event.dataTransfer.setData("text", event.target.id);
}

function allowDrop(event) {
  event.preventDefault();
}

function drop(event) {
  event.preventDefault();
  var id = event.dataTransfer.getData("text");
  var elementoArrastado = document.getElementById(id);
  event.target.appendChild(elementoArrastado);
}
*/

///girar mapa
let mapaGirado = false;

document.querySelector('.girarBotao').addEventListener('click', function() {
  if (!mapaGirado) {
    document.querySelector('.mapa').style.transform = 'rotate(180deg)';
    document.querySelector('.mapa').style.transition = 'transform 0.2s ease-in-out';
    mapaGirado = true;
  } else {
    document.querySelector('.mapa').style.transform = 'rotate(0deg)';
    document.querySelector('.mapa').style.transition = 'transform 0.2s ease-in-out';
    mapaGirado = false;
  }
});



/// Gerar cartas

class Personagem {
  constructor(cartas) {
    this.imgPath = cartas.img;
  }

  criarPersonagem() {
    const div = document.createElement('div');
    div.className = 'personagem';
    div.style.backgroundImage = `url(${this.imgPath})`;
    div.style.backgroundSize = 'cover';
    div.style.width = '32px';
    div.style.height = '32px';
    div.style.marginLeft = '1px';
    div.style.marginTop = '1px';
    div.style.border = '2px solid rgb(0,14,138)';
    div.style.cursor = 'pointer';

    div.addEventListener("mouseover", () => {
      div.style.transform = "scale(1.2)";
      div.style.boxShadow = "0px 0px 10px rgba(0, 0, 0, 0.5)";
    });

    div.addEventListener("mouseout", () => {
      div.style.transform = "scale(1)";
      div.style.boxShadow = "none";
    });

    div.addEventListener('click', function() {
      selecionarObjeto(this);
    });

    const deck = document.querySelector('.deck');
    deck.appendChild(div);
  }
}

const botaoGerarCartas = document.querySelector(".gerarCartas");
const deck = document.querySelector(".deck");

botaoGerarCartas.addEventListener("click", () => {
  if (deck.children.length === 1) { // Verifica se o deck está vazio
    const numerosSorteados = [];
    for (var i = 0; i < 5; i++) {
      let numeroAleatorio;
      do {
        numeroAleatorio = Math.floor(Math.random() * 18) + 1;
      } while (numerosSorteados.includes(numeroAleatorio));
      numerosSorteados.push(numeroAleatorio);
      var cartaSelecionada = Cartas[numeroAleatorio];
      var personagem = new Personagem(cartaSelecionada);
      personagem.criarPersonagem();
      delete Cartas[numeroAleatorio]; // Remove o índice do elemento sorteado
      console.log(Cartas)
    }
  }
});

//Limitar criação de cartas
let objetoSelecionado = null;

function selecionarObjeto(objeto) {
  objetoSelecionado = objeto;
}

//Movimentar personagens
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll('.bloco, .porta, .blocoDeCombate, .areaDeNado').forEach(function(alvo) {
    alvo.addEventListener('click', function() {
      if (objetoSelecionado) {
        this.appendChild(objetoSelecionado);
        objetoSelecionado.addEventListener('click', function() {
          selecionarObjeto(this);
        });
      }
    });
  });
});

